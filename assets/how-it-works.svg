<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 200" font-family="Segoe UI, Roboto, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#666"/>
    </marker>
    <marker id="arrow-loop" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#2196F3"/>
    </marker>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Node 1: Input -->
  <rect x="20" y="70" width="140" height="60" rx="8" fill="#f5f5f5" stroke="#bbb" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="90" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#333">Your Prompt</text>
  <text x="90" y="112" text-anchor="middle" font-size="11" fill="#666">+ Examples</text>

  <!-- Arrow 1 -->
  <line x1="160" y1="100" x2="195" y2="100" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Node 2: Evaluate -->
  <rect x="200" y="70" width="140" height="60" rx="8" fill="#E3F2FD" stroke="#2196F3" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="270" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#1565C0">Evaluate</text>
  <text x="270" y="112" text-anchor="middle" font-size="10" fill="#1976D2">Target + Judge</text>

  <!-- Arrow 2 -->
  <line x1="340" y1="100" x2="375" y2="100" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Node 3: Generate -->
  <rect x="380" y="70" width="140" height="60" rx="8" fill="#FFF3E0" stroke="#FF9800" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="450" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#E65100">Generate</text>
  <text x="450" y="112" text-anchor="middle" font-size="10" fill="#F57C00">5 Optimizers</text>

  <!-- Arrow 3 -->
  <line x1="520" y1="100" x2="555" y2="100" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Node 4: Select -->
  <rect x="560" y="70" width="140" height="60" rx="8" fill="#F3E5F5" stroke="#9C27B0" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="630" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#6A1B9A">Select Top-K</text>
  <text x="630" y="112" text-anchor="middle" font-size="10" fill="#7B1FA2">Beam Search</text>

  <!-- Arrow 4 -->
  <line x1="700" y1="100" x2="735" y2="100" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Node 5: Output -->
  <rect x="740" y="70" width="140" height="60" rx="8" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2" filter="url(#shadow)"/>
  <text x="810" y="95" text-anchor="middle" font-size="13" font-weight="600" fill="#2E7D32">Optimized</text>
  <text x="810" y="112" text-anchor="middle" font-size="11" fill="#388E3C">Prompt ✓</text>

  <!-- Loop arrow: Select back to Evaluate -->
  <path d="M 630,130 L 630,165 Q 630,175 620,175 L 280,175 Q 270,175 270,165 L 270,130"
        fill="none" stroke="#2196F3" stroke-width="1.5" stroke-dasharray="6,3" marker-end="url(#arrow-loop)"/>
  <rect x="410" y="166" width="60" height="18" rx="3" fill="white"/>
  <text x="440" y="179" text-anchor="middle" font-size="10" fill="#2196F3" font-style="italic">repeat</text>

  <!-- Scoring detail below Evaluate -->
  <text x="270" y="28" text-anchor="middle" font-size="9" fill="#999">Empirical 50% · Structural 30% · Adversarial 20%</text>
</svg>
